# ==========================================================================
# Vyuha AI — Blaxel Deployment Manifest
# ==========================================================================
# Deploy:  bl deploy
# Run:     bl run agent vyuha-ai --data '{"inputs":"Scan ISS for collision risks"}'
# Logs:    bl logs agent vyuha-ai

name = "vyuha-ai"
workspace = "rs"
type = "agent"
public = true

# LLM backing the Commander decision engine
models = ["sandbox-openai"]

# MCP tool-servers the agent can invoke
functions = ["vyuha-orbital-tools"]

# ---------------------------------------------------------------------------
# Environment — set secrets (BLAXEL_API_KEY, WHITE_CIRCLE_*) in Blaxel dashboard
# ---------------------------------------------------------------------------
[env]
SPACECRAFT_MODE = "autonomous"
COLLISION_THRESHOLD = "0.7"
MAX_RETRIES = "3"
ISS_TLE_SOURCE = "celestrak"
STATE_PERSISTENCE = "enabled"
# White Circle (security gateway) — set WHITE_CIRCLE_API_KEY and WHITE_CIRCLE_DEPLOYMENT_ID in Blaxel project
WHITE_CIRCLE_BASE_URL = "https://us.whitecircle.ai"
WHITE_CIRCLE_VERSION = "2025-12-01"
# Overshoot AI (visual threat detection) — set OVERSHOOT_API_KEY in Blaxel project
OVERSHOOT_BASE_URL = "https://cluster1.overshoot.ai/api/v0.2"

[runtime]
timeout = 900          # 15 min max per invocation
memory = 4096          # MB
generation = "mk3"     # Blaxel runtime generation

[entrypoint]
prod = "python -m agent.src.main"

# ---------------------------------------------------------------------------
# HTTP triggers — sync for real-time queries, async for long-running maneuvers
# ---------------------------------------------------------------------------

[[triggers]]
id = "vyuha-scan"
type = "http"
enabled = true
[triggers.configuration]
path = "agents/vyuha-ai/scan"
authenticationType = "private"

[[triggers]]
id = "vyuha-act"
type = "http"
enabled = true
[triggers.configuration]
path = "agents/vyuha-ai/act"
authenticationType = "private"

[[triggers]]
id = "vyuha-maneuver-async"
type = "http-async"
enabled = true
[triggers.configuration]
path = "agents/vyuha-ai/maneuver"
retry = 3

[[triggers]]
id = "vyuha-state"
type = "http"
enabled = true
[triggers.configuration]
path = "agents/vyuha-ai/state"
authenticationType = "private"

[[triggers]]
id = "vyuha-restore"
type = "http"
enabled = true
[triggers.configuration]
path = "agents/vyuha-ai/restore"
authenticationType = "private"

[[triggers]]
id = "vyuha-history"
type = "http"
enabled = true
[triggers.configuration]
path = "agents/vyuha-ai/history"
authenticationType = "private"

[[triggers]]
id = "vyuha-health"
type = "http"
enabled = true
[triggers.configuration]
path = "agents/vyuha-ai/health"
authenticationType = "public"

[[triggers]]
id = "vyuha-insights"
type = "http"
enabled = true
[triggers.configuration]
path = "agents/vyuha-ai/insights"
authenticationType = "private"
